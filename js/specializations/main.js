
let specializations = [
'ВЕБ-программирование',
'HTML-верстка',
'Системы управления (CMS)',
'Сайт \"Под ключ\"',
'Интернет-магазины',
'Тестирование сайтов',
'Копирайтинг',
'Переводы',
'Редактирование и Корректура',
'Рерайтинг',
'Продающие текста',
'Нейминг и Слоганы',
'Сценарии',
'Транскрибация',
'Мобильные предложения',
'Прикладное ПО',
'База данных',
'1C-программирование',
'Системное Програм',
'Разработка игр',
'Встраиваемые системы',
'Тестирование ПО',
'Управление продажами',
'Управление проектами',
'Подбор персонала (HR)',
'Дизайн сайтов',
'Баннеры',
'Дизайн интерфейсов и игр',
'Иконки и Пиксель-арт',
'Дизайн мобильных приложений',
'Наполнение сайтов',
'Служба поддержки',
'Системное администрирование',
'Иллюстрации и Рисунки',
'3D-графика',
'Обработка фотографий',
'Фотосъемка',
'Шрифты',
'Видеомонтаж',
'Анимация',
'Озвучивание',
'Презентации',
'Музыка и Звуки',
'Аудиомонтаж',
'Контрольные и Тесты',
'Рефераты и Курсовые',
'Лабораторные работы',
'Уроки и Репититорство',
'Логотипы и Знаки',
'Дизайн продукции',
'Верстка полиграфии',
'Фирменный стиль',
'Наружная реклама',
'Интерьеры и Экстерьеры',
'Чертежи и Схемы',
'Архитектура зданий',
'Машиностроение',
'Ландшафтный дизайн',
'Социальные сети (SMM и SMO)',
'Поисковые системы (SEO)',
'Контекстная реклама',
'Маркентиговый анализ'
];

let categories = [
'WEB-разработка и Сайты',
'Тексты и переводы',
'Программирование ПО и систем',
'Управление персоналом',
'ВЕБ-дизайн и интерфейсы',
'Администрирование сайтов',
'Графика и Фотография',
'Аудио, Видео и Мультимедия',
'Учеба и репититорство',
'Полиграфия и Айдентика',
'Архитектура и Инжиниринг',
'Продвижение сайтов (SEO)'
];

let categoriesAndSpecializations = [{
    name: categories[0],
    value: [
    specializations[0],
    specializations[1],
    specializations[2],
    specializations[3],
    specializations[4],
    specializations[5]
    ],
    power: 'enable'
},
{
    name: categories[1],
    value: [
    specializations[6],
    specializations[7],
    specializations[8],
    specializations[9],
    specializations[10],
    specializations[11],
    specializations[12],
    specializations[13]
    ],
    power: 'enable'
},
{
    name: categories[2],
    value: [
    specializations[14],
    specializations[15],
    specializations[16],
    specializations[17],
    specializations[18],
    specializations[19],
    specializations[20],
    specializations[21]

    ],
    power: 'enable'
},
{
    name: categories[3],
    value: [
    specializations[22],
    specializations[23],
    specializations[24]
    ],
    power: 'enable'
},
{
    name: categories[4],
    value: [
    specializations[25],
    specializations[26],
    specializations[27],
    specializations[28],
    specializations[29]
    ],
    power: 'enable'
},
{
    name: categories[5],
    value: [
    specializations[30],
    specializations[31],
    specializations[32]
    ],
    power: 'enable'
},
{
    name: categories[6],
    value: [
    specializations[33],
    specializations[34],
    specializations[35],
    specializations[36],
    specializations[37]
    ],
    power: 'enable'
},
{
    name: categories[7],
    value: [
    specializations[38],
    specializations[39],
    specializations[40],
    specializations[41],
    specializations[42],
    specializations[43]
    ],
    power: 'enable'
},
{
    name: categories[8],
    value: [
    specializations[44],
    specializations[45],
    specializations[46],
    specializations[47]
    ],
    power: 'enable'
},
{
    name: categories[9],
    value: [
    specializations[48],
    specializations[49],
    specializations[50],
    specializations[51],
    specializations[52]
    ],
    power: 'enable'
},
{
    name: categories[10],
    value: [
    specializations[53],
    specializations[54],
    specializations[55],
    specializations[56],
    specializations[57]
    ],
    power: 'enable'
},
{
    name: categories[11],
    value: [
    specializations[58],
    specializations[59],
    specializations[60],
    specializations[61]
    ],
    power: 'enable'
},
]

let additionalSkill = [{
    name: 'UX/UI-дизайн',
    power: 'enable'
},
{
    name: 'Моушн-дизайн/видеодизайн',
    power: 'enable'
},
{
    name: 'Маркетинг',
    power: 'enable'
},
{
    name: 'Верстка',
    power: 'enable'
},
{
    name: 'Рекрутинг в ИТ',
    power: 'enable'
},
{
    name: 'Юзабилити',
    power: 'enable'
},
{
    name: 'SMM-маркетинг',
    power: 'enable'
},
{
    name: 'SEO оптимизация',
    power: 'enable'
},
{
    name: 'Продвижение сайтов',
    power: 'enable'
},
{
    name: 'PHP-программист',
    power: 'enable'
},
{
    name: 'Frontend-программист',
    power: 'enable'
},
{
    name: 'Backend-программист',
    power: 'enable'
},
{
    name: 'Бухгалтерия',
    power: 'enable'
},
{
    name: 'Переводы',
    power: 'enable'
},
{
    name: '1С-программист',
    power: 'enable'
},
{
    name: 'Системный администратор',
    power: 'enable'
},
{
    name: 'Fullstack-программист',
    power: 'enable'
},
{
    name: 'Вебмастер',
    power: 'enable'
},
{
    name: 'Рерайтер',
    power: 'enable'
},
{
    name: 'Модератор сайта',
    power: 'enable'
},
{
    name: 'Технический дизайнер',
    power: 'enable'
},
{
    name: '3D-дизайнер',
    power: 'enable'
},
{
    name: 'Менеджер по продажам',
    power: 'enable'
},
{
    name: 'Электронная коммерция',
    power: 'enable'
},
{
    name: 'Веб-дизайн',
    power: 'enable'
}
];

//  Draw List
function drawInListSpecializationsBody() {
    let listSpecializationsBody = document.querySelector('.card_specializations .list_specializations_body');
    let newListSpecializationsBody = '';
    additionalSkill.forEach(element => {
        newListSpecializationsBody += `
        <div class="list_specializations_item" draggable="true">
        <div class="name_specialization">${element.name}</div>
        <div class="setting_specialization">
        <div class="button button_edit" onclick="openContentRemoveItemSprecialization(this)"><img src="icons/edit.svg" alt="edit" title="edit"></div>
        <div class="button button_enable" onclick="powerItemInListSpecializationsBody(this)"><img src="${element.power == 'enable'?'icons/switch on.svg':'icons/switch off.svg'}" title='${element.power}'></div>
        <div class="button button_delete" ondblclick="deleteItemInListSpecializationsBody(this)"><img src="icons/delete.svg" alt="delete" title="delete"></div>
        </div>
        </div>`;
        listSpecializationsBody.innerHTML = newListSpecializationsBody;
    });
    if (additionalSkill.length == 0) {
        listSpecializationsBody.innerHTML = '';
    }
}
drawInListSpecializationsBody();


// Delete item in list
function deleteItemInListSpecializationsBody(element) {
    let nameDelSkill = element.closest('.setting_specialization').previousElementSibling.innerText;
    additionalSkill.forEach((element, index) => {
        if (element.name == nameDelSkill) {
            additionalSkill.splice(index, 1);
        }
    });
    drawInListSpecializationsBody();
}


// Power item in list
function powerItemInListSpecializationsBody(element) {
    let namePowerSkill = element.closest('.setting_specialization').previousElementSibling.innerText;
    if (element.querySelector('img').getAttribute('title') == 'enable') {
        element.querySelector('img').setAttribute('title', 'disable')
        element.querySelector('img').setAttribute('src', 'icons/switch off.svg');
        additionalSkill.forEach((element, index) => {
            if (element.name == namePowerSkill) {
                additionalSkill[index].power = 'disable';
            }
        });

    } else if (element.querySelector('img').getAttribute('title') == 'disable') {
        element.querySelector('img').setAttribute('title', 'enable')
        element.querySelector('img').setAttribute('src', 'icons/switch on.svg');
        additionalSkill.forEach((element, index) => {
            if (element.name == namePowerSkill) {
                additionalSkill[index].power = 'enable';
            }
        });
    }
}


// Add and remove item list
let add_item_spec = document.querySelector('.card_specializations button.add_item_spec');
let list_specializations = document.querySelector('.card_specializations .list_specializations');
let add_item_specialization = document.querySelector('.card_specializations .add_item_specialization');
let rename_spec_text_header = document.querySelector('.card_specializations .rename_spec_text_header');
add_item_spec.addEventListener('click', () => {
    list_specializations.classList.toggle('display-none');
    add_item_specialization.classList.toggle('display-none');
    add_item_spec.classList.add('display-none');
    rename_spec_text_header.innerText = 'Добавление дополнительных навыков';
});

let remove_item_specialization = document.querySelector('.card_specializations .remove_item_specialization');
let remove_name_specialization = document.querySelector('.card_specializations #remove_name_specialization');
let remove_name;

function openContentRemoveItemSprecialization(element) {
    list_specializations.classList.toggle('display-none');
    remove_item_specialization.classList.toggle('display-none');
    add_item_spec.classList.add('display-none');
    remove_name = element.closest('.setting_specialization').previousElementSibling.innerText;
    remove_name_specialization.value = remove_name;
    rename_spec_text_header.innerText = 'Переименовать навык';
}

let input_name_specialization = document.querySelector('.card_specializations #name_specialization');
let btn_save_specialization = document.querySelectorAll('.card_specializations button.btn_save');
let btn_cancel_specialization = document.querySelectorAll('.card_specializations button.btn_cancel');

btn_save_specialization.forEach(element => element.onclick = () => {
    if (!add_item_specialization.classList.contains('display-none')) {
        if (input_name_specialization.value == '') {
            input_name_specialization.setAttribute('placeholder', 'Введите имя навык');
        } else {
            additionalSkill.push({
                name: input_name_specialization.value,
                power: 'enable'
            });
            input_name_specialization.removeAttribute('placeholder');
            input_name_specialization.value = '';
            list_specializations.classList.toggle('display-none');
            add_item_specialization.classList.toggle('display-none');
            add_item_spec.classList.remove('display-none');
            rename_spec_text_header.innerText = 'Список дополнительных навыков';
            drawInListSpecializationsBody();
        }
    } else if (!remove_item_specialization.classList.contains('display-none')) {
        if (remove_name_specialization.value == '') {
            remove_name_specialization.setAttribute('placeholder', 'Введите имя навык');
        } else {
            additionalSkill.forEach((element, index) => {
                if (remove_name == element.name) {
                    element.name = remove_name_specialization.value;
                }
            });
            drawInListSpecializationsBody();
            remove_name_specialization.removeAttribute('placeholder');
            list_specializations.classList.toggle('display-none');
            remove_item_specialization.classList.toggle('display-none');
            add_item_spec.classList.remove('display-none');
            rename_spec_text_header.innerText = 'Список дополнительных навыков';
        }
    }
});
function cancel_btn_specialization() {
    input_name_specialization.removeAttribute('placeholder');
    input_name_specialization.value = '';
    list_specializations.classList.remove('display-none');
    add_item_specialization.classList.add('display-none');
    remove_item_specialization.classList.add('display-none');
    add_item_spec.classList.remove('display-none');
    rename_spec_text_header.innerText = 'Список дополнительных навыков';
}
btn_cancel_specialization.forEach(element => element.onclick = () => {
    cancel_btn_specialization();
});

///////////////////////////////////////////////////////////////////////////////////////////////////////////

//Change section
let drop_menu_specialization_item = document.querySelectorAll('.drop_menu_specialization_item');
let sections = document.querySelectorAll('section[data-open]');
drop_menu_specialization_item.forEach(element => element.onclick = () => {
    drop_menu_specialization_item.forEach(element => element.classList.remove('active_drop_menu_specialization_item'));
    element.classList.add('active_drop_menu_specialization_item');
    cancel_btn_category();
    cancel_btn_specialization();
    let elementClick = element;
    sections.forEach(element => {
        if (element.getAttribute('data-open') == elementClick.getAttribute('data-open')) {
            element.classList.remove('display-none');
        } else {
            element.classList.add('display-none');
        }
    });
});

//////////////////////////////////////////////////////////////////////////////////////////////////////

//Draw editor list
function drawEditorListInCategory() {
    document.querySelectorAll('.specializations-list').forEach((element, index) => {
        let indexOne = index;
        element.innerHTML = '<span class="title">Специализации</span>' + specializations.map((element, index) => {
            return `<div class="spec-list-item">
            <input type="checkbox" id="${indexOne + '' + index}">
            <label for="${indexOne + '' + index}">${element}</label>
            </div>`
        }).join('');
    });
    remove_category_checkboxs = document.querySelectorAll('.remove_item_categories_specialization .specializations-list input');
    add_category_checkboxs = document.querySelectorAll('.add_item_categories_specialization .specializations-list input');
}


//Draw category list
function drawInListCategoriesSpecializationsBody() {
    let list_categories_specializations_body = document.querySelector('.card_categories_specializations .list_categories_specializations_body');
    let new_list_categories_specializations_body = '';
    categoriesAndSpecializations.forEach(element => {
        let new_drop_menu_list_categories = '';
        element.value.forEach(elementValue => {
            new_drop_menu_list_categories += `<div class="item_specialization_under_category" draggable="true">${elementValue}</div>`;
        })
        new_list_categories_specializations_body += `
        <div class="wrapped_item_list_categories">
        <div class="list_categories_specializations_item" draggable="true">
        <div class="wrapped_name_icon_category">
        <div class="icon_category"><img src="icons/folder.svg"></div>
        <div class="name_category">${element.name}</div>
        </div>
        <div class="setting_category_specialization">
        <div class="button button_edit" onclick="editItemCategory(this)"><img src="icons/edit_category.svg" alt="edit" title="edit"></div>
        <div class="button button_enable" onclick="powerItemCategory(this)"><img src="${element.power == 'enable'?'icons/switch on.svg':'icons/switch off.svg'}" title="${element.power}"></div>
        <div class="button button_delete" ondblclick="deleteItemCategory(this)"><img src="icons/delete.svg" alt="delete" title="delete"></div>
        </div>
        </div>
        <div class="drop_menu_list_categories">
        ${new_drop_menu_list_categories}
        </div>
        </div>
        `;
        list_categories_specializations_body.innerHTML = new_list_categories_specializations_body;
    });
    if (categoriesAndSpecializations.length == 0) {
        list_categories_specializations_body.innerHTML = '';
    }
}
drawInListCategoriesSpecializationsBody();


//Open drop list categories
function openDropListCategories() {
    let wrapped_name_icon_category = document.querySelectorAll('.card_categories_specializations .wrapped_name_icon_category');
    wrapped_name_icon_category.forEach(element => element.onclick = () => {
        element.parentElement.nextElementSibling.classList.toggle('display-block');
        element.parentElement.classList.toggle('active_list_categories_specializations_item');
    });
}
openDropListCategories();


//Edit and add item category
let list_categories_specializations = document.querySelector('.card_categories_specializations .list_categories_specializations')
let inCategories_specializations_header_right = document.querySelector('.card_categories_specializations .inCategories_specializations_header_right');
let remove_item_categories_specialization = document.querySelector('.card_categories_specializations .remove_item_categories_specialization');
let add_item_categories_specialization = document.querySelector('.card_categories_specializations .add_item_categories_specialization');
let rename_cat_text_header = document.querySelector('.card_categories_specializations .rename_cat_text_header');
let remove_name_category_input = document.querySelector('#remove_name_category');
let remove_category_checkboxs;
let remove_category_name;
inCategories_specializations_header_right.addEventListener('click', () => {
    list_categories_specializations.classList.toggle('display-none');
    add_item_categories_specialization.classList.toggle('display-none');
    inCategories_specializations_header_right.classList.add('display-none');
    rename_cat_text_header.innerText = 'Добавление категории';
    drawEditorListInCategory();
});

function editItemCategory(element) {
    drawEditorListInCategory();
    list_categories_specializations.classList.add('display-none');
    inCategories_specializations_header_right.classList.add('display-none');
    remove_item_categories_specialization.classList.remove('display-none');
    rename_cat_text_header.innerText = 'Редактирование категории';
    remove_category_name = element.closest('.setting_category_specialization').previousElementSibling.querySelector('.name_category').innerText;
    remove_name_category_input.value = remove_category_name;
    let elementInObject;
    categoriesAndSpecializations.forEach(element => {
        if (element.name == remove_category_name) {
            elementInObject = element;
        }
    });
    elementInObject.value.forEach(element => {
        for (const i of remove_category_checkboxs) {
            if (i.nextElementSibling.innerText == element) {
                i.checked = 'true';
                break;
            }
        }
    });
}

let add_name_category_input = document.querySelector('.card_categories_specializations #name_category');
let btn_save_category = document.querySelectorAll('.card_categories_specializations button.btn_save');
let btn_cancel_category = document.querySelectorAll('.card_categories_specializations button.btn_cancel');

btn_save_category.forEach(element => element.onclick = () => {
    if (!add_item_categories_specialization.classList.contains('display-none')) {
        if (add_name_category_input.value == '') {
            add_name_category_input.setAttribute('placeholder', 'Введите название категории');
        } else {
            let newCategoryValue = [];
            add_category_checkboxs.forEach(element => {
                if (element.checked) {
                    newCategoryValue.push(specializations[element.getAttribute('id').substring(1)]);
                }
            });
            categoriesAndSpecializations.push({
                name: add_name_category_input.value,
                power: 'enable',
                value: newCategoryValue
            });
            add_name_category_input.removeAttribute('placeholder');
            add_name_category_input.value = '';
            list_categories_specializations.classList.toggle('display-none');
            add_item_categories_specialization.classList.toggle('display-none');
            inCategories_specializations_header_right.classList.remove('display-none');
            rename_cat_text_header.innerText = 'Список категорий';
            drawInListCategoriesSpecializationsBody();
            openDropListCategories();
        }
    } else if (!remove_item_categories_specialization.classList.contains('display-none')) {
        if (remove_name_category_input.value == '') {
            remove_name_category_input.setAttribute('placeholder', 'Введите название категории');
        } else {
            let newCategoryValue = [];
            remove_category_checkboxs.forEach(element => {
                if (element.checked) {
                    newCategoryValue.push(specializations[element.getAttribute('id').substring(1)]);
                }
            });
            categoriesAndSpecializations.forEach((element, index) => {
                if (remove_category_name == element.name) {
                    element.name = remove_name_category_input.value;
                    element.value = newCategoryValue;
                }
            });
            drawInListCategoriesSpecializationsBody();
            openDropListCategories();
            remove_name_category_input.removeAttribute('placeholder');
            list_categories_specializations.classList.toggle('display-none');
            remove_item_categories_specialization.classList.toggle('display-none');
            inCategories_specializations_header_right.classList.remove('display-none');
            rename_cat_text_header.innerText = 'Список категорий';
        }
    }
});
function cancel_btn_category() {
    add_name_category_input.removeAttribute('placeholder');
    add_name_category_input.value = '';
    list_categories_specializations.classList.remove('display-none');
    add_item_categories_specialization.classList.add('display-none');
    remove_item_categories_specialization.classList.add('display-none');
    inCategories_specializations_header_right.classList.remove('display-none');
    rename_cat_text_header.innerText = 'Список категорий';
}
btn_cancel_category.forEach(element => element.onclick = () => {
    cancel_btn_category();
});


//Power item category
function powerItemCategory(element) {
    let namePowerCategory = element.closest('.setting_category_specialization').previousElementSibling.querySelector('.name_category').innerText;
    console.log(namePowerCategory)
    if (element.querySelector('img').getAttribute('title') == 'enable') {
        element.querySelector('img').setAttribute('title', 'disable')
        element.querySelector('img').setAttribute('src', 'icons/switch off.svg');
        categoriesAndSpecializations.forEach((element, index) => {
            if (element.name == namePowerCategory) {
                categoriesAndSpecializations[index].power = 'disable';
            }
        });

    } else if (element.querySelector('img').getAttribute('title') == 'disable') {
        element.querySelector('img').setAttribute('title', 'enable')
        element.querySelector('img').setAttribute('src', 'icons/switch on.svg');
        categoriesAndSpecializations.forEach((element, index) => {
            if (element.name == namePowerCategory) {
                categoriesAndSpecializations[index].power = 'enable';
            }
        });
    }
}


//Delete item category
function deleteItemCategory(element) {
    let nameDelCategory = element.closest('.setting_category_specialization').previousElementSibling.querySelector('.name_category').innerText;
    categoriesAndSpecializations.forEach((element, index) => {
        if (element.name == nameDelCategory) {
            categoriesAndSpecializations.splice(index, 1);
        }
    });
    drawInListCategoriesSpecializationsBody();
    openDropListCategories();
}

/* ================== extra ====================== */

let chat = document.querySelector('.chat i');
let chatText = document.querySelector('.chat_text');
const showChat = document.querySelector('.block');


showChat.addEventListener('click', () => {
    chatText.style.visibility = 'hidden';
});

let click;
chat.addEventListener('click', () => {
    if (click == 0) {
        chatText.style.visibility = 'hidden'
        return click = 1;
    } else {
        chatText.style.visibility = 'visible'
        return click = 0;
    }
});



$(function () { 
    let menu_list = document.querySelectorAll('.menu_list');
    for (let i = 0; i < menu_list.length; i++) {
        menu_list[i].addEventListener('click', function (e) {
            let submenu = menu_list[i].parentElement.children[1];
            let arrow = menu_list[i].children[0];
            $(submenu).slideToggle(300);
            $(arrow).eq($(this).index()).toggleClass('upactive');
        })
    }
    let quit = document.querySelector('.quitBlock');
    let avatar = document.querySelector('.avatar');

    avatar.addEventListener('click', () => {
        quit.style.display = 'block';
        if (quit.style.right == '69px') {
            $(quit).animate({ right: "7px" }, 500);
        } else {
            $(quit).animate({ right: "69px" }, 500);
        }
    })
    showChat.addEventListener('click', () => {
        $(quit).animate({ right: "7px" }, 500);
    });

})


/* =========================== переключатели ========================== */

const toggler = (target, showingTarget, hidingTargetOne, hidingTargetTwo, hidingTargetThree, hidingTargetFour, hidingTargetFive) => {
    target.addEventListener('click', () => {
        showingTarget.style.display = 'block';
        hidingTargetTwo.style.display = 'none';
        hidingTargetOne.style.display = 'none';
    })
}

let activeToggles = document.querySelectorAll('.activeToggles');
let targetOne = document.querySelector('.card_categories_specializations');
let targetTwo = document.querySelector('.card_specializations');
let targetThree = document.querySelector('.card_settings_specializations');
for(let i = 0;i < activeToggles.length; i++){
    activeToggles[i].addEventListener('click', () => {
        if(activeToggles[0].classList.contains('mainActive')){
            activeToggles[0].classList.remove('mainActive');
        }else if(activeToggles[1].classList.contains('mainActive')){            
            activeToggles[1].classList.remove('mainActive');
        }else{            
            activeToggles[2].classList.remove('mainActive');            
        }
        activeToggles[i].classList.add('mainActive');
    })    
}
toggler(activeToggles[0], targetOne, targetTwo, targetThree)
toggler(activeToggles[1], targetTwo, targetOne, targetThree)
toggler(activeToggles[2], targetThree, targetOne, targetTwo)




